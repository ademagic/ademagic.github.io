<!DOCTYPE html>
<html lang="en" class="astro-JZNANOIY">
<head>
  <!-- Global Metadata --><meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<link rel="icon" type="image/x-icon" href="/favicon.ico">


<!-- Primary Meta Tags -->
<title>Why are styles on my Astro site not working in GitHub Pages? | Miko Ademagic</title>
<meta name="title" content="Why are styles on my Astro site not working in GitHub Pages? | Miko Ademagic">
<meta name="description" content="How Jekyll and GitHub Pages don't play nicely with Astro sites, and how to easily fix it.">

<!-- Open Graph / Facebook -->
<meta property="og:type" content="website">
<meta property="og:url" content="http://miko.ademagic.com/blog/astro-styles-on-github-pages">
<meta property="og:title" content="Why are styles on my Astro site not working in GitHub Pages? | Miko Ademagic">
<meta property="og:description" content="How Jekyll and GitHub Pages don't play nicely with Astro sites, and how to easily fix it.">
<meta property="og:image" content="http://miko.ademagic.com/assets/social.jpg">

<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image">
<meta property="twitter:url" content="http://miko.ademagic.com/blog/astro-styles-on-github-pages">
<meta property="twitter:title" content="Why are styles on my Astro site not working in GitHub Pages? | Miko Ademagic">
<meta property="twitter:description" content="How Jekyll and GitHub Pages don't play nicely with Astro sites, and how to easily fix it.">
<meta property="twitter:image" content="http://miko.ademagic.com/assets/social.jpg">

<!-- This is intentionally inlined to avoid FOUC -->


<link rel="stylesheet" href="/assets/404.e3c730d9.css" />
<link rel="stylesheet" href="/assets/_slug_.47eb51e0.css" />
<link rel="stylesheet" href="/assets/_slug_.2d39503c.css" />
<link rel="stylesheet" href="/assets/_slug_.51b6fd80.css" /><script type="module">const e=document.documentElement,t=localStorage.getItem("theme");t==="dark"||!t&&window.matchMedia("(prefers-color-scheme: dark)").matches?e.classList.add("theme-dark"):e.classList.remove("theme-dark");
</script></head>
<body class="astro-JZNANOIY">
  <div class="layout astro-JZNANOIY">
    

<header class="astro-6D4J5VFV">
  

<a href="/" class="astro-D4FORD2D">
  <span class="astro-D4FORD2D">
    <svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg" class="astro-D4FORD2D">
      <rect width="16" height="16" fill-opacity="0.5" class="astro-D4FORD2D"></rect>
      <rect x="32" width="16" height="16" class="astro-D4FORD2D"></rect>
      <rect x="16" y="16" width="16" height="16" fill-opacity="0.75" class="astro-D4FORD2D"></rect>
      <rect y="32" width="16" height="16" fill-opacity="0.25" class="astro-D4FORD2D"></rect>
    </svg>
  </span>
</a>
  

<nav class="astro-UFKXQVDE">
  <!-- <a class={current === "" ? "selected" : ""} href='/'>home</a> -->
  <a class=" astro-UFKXQVDE" href="/about">about</a>
  <a class="selected astro-UFKXQVDE" href="/blog">blog</a>
  <div class="theme-toggle-container astro-UFKXQVDE">
    <style>astro-island,astro-slot{display:contents}</style><script>(self.Astro=self.Astro||{}).load=a=>{(async()=>await(await a())())()},window.dispatchEvent(new Event("astro:load"));var l;{const c={0:t=>t,1:t=>JSON.parse(t,o),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(JSON.parse(t,o)),5:t=>new Set(JSON.parse(t,o)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(JSON.parse(t)),9:t=>new Uint16Array(JSON.parse(t)),10:t=>new Uint32Array(JSON.parse(t))},o=(t,s)=>{if(t===""||!Array.isArray(s))return s;const[e,n]=s;return e in c?c[e](n):void 0};customElements.get("astro-island")||customElements.define("astro-island",(l=class extends HTMLElement{constructor(){super(...arguments);this.hydrate=()=>{if(!this.hydrator||this.parentElement&&this.parentElement.closest("astro-island[ssr]"))return;const s=this.querySelectorAll("astro-slot"),e={},n=this.querySelectorAll("template[data-astro-template]");for(const r of n){const i=r.closest(this.tagName);!i||!i.isSameNode(this)||(e[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(const r of s){const i=r.closest(this.tagName);!i||!i.isSameNode(this)||(e[r.getAttribute("name")||"default"]=r.innerHTML)}const a=this.hasAttribute("props")?JSON.parse(this.getAttribute("props"),o):{};this.hydrator(this)(this.Component,a,e,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),window.removeEventListener("astro:hydrate",this.hydrate),window.dispatchEvent(new CustomEvent("astro:hydrate"))}}connectedCallback(){!this.hasAttribute("await-children")||this.firstChild?this.childrenConnectedCallback():new MutationObserver((s,e)=>{e.disconnect(),this.childrenConnectedCallback()}).observe(this,{childList:!0})}async childrenConnectedCallback(){window.addEventListener("astro:hydrate",this.hydrate);let s=this.getAttribute("before-hydration-url");s&&await import(s),this.start()}start(){const s=JSON.parse(this.getAttribute("opts")),e=this.getAttribute("client");if(Astro[e]===void 0){window.addEventListener(`astro:${e}`,()=>this.start(),{once:!0});return}Astro[e](async()=>{const n=this.getAttribute("renderer-url"),[a,{default:r}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),i=this.getAttribute("component-export")||"default";if(!i.includes("."))this.Component=a[i];else{this.Component=a;for(const d of i.split("."))this.Component=this.Component[d]}return this.hydrator=r,this.hydrate},s,this)}attributeChangedCallback(){this.hydrator&&this.hydrate()}},l.observedAttributes=["props"],l))}</script><astro-island uid="Ja611" component-url="/ThemeToggleButton.3113899d.js" component-export="default" renderer-url="/client.788af3ea.js" props="{&quot;class&quot;:[0,&quot;astro-UFKXQVDE&quot;]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;ThemeToggleButton&quot;,&quot;value&quot;:true}" await-children=""><div class="theme-toggle"><label class=""><!-- HTML_TAG_START --><svg
      xmlns="http://www.w3.org/2000/svg"
      width="20"
      height="20"
      viewBox="0 0 20 20"
      fill="currentColor"
    >
      <path
        fill-rule="evenodd"
        d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z"
        clip-rule="evenodd"
      />
    </svg><!-- HTML_TAG_END -->
      <input type="radio" name="theme-toggle"  value="light" title="Use light theme" aria-label="Use light theme">
    </label><label class=""><!-- HTML_TAG_START --><svg
      xmlns="http://www.w3.org/2000/svg"
      width="20"
      height="20"
      viewBox="0 0 20 20"
      fill="currentColor"
    >
      <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z" />
    </svg><!-- HTML_TAG_END -->
      <input type="radio" name="theme-toggle"  value="dark" title="Use dark theme" aria-label="Use dark theme">
    </label></div></astro-island>
  </div>
</nav>
</header>

    <main class="astro-JZNANOIY">
      <header class="astro-FTBPKZRT">
    <p class="astro-FTBPKZRT">16 Mar 2023 ~ 4 min read</p>
    <h1 class="astro-FTBPKZRT">Why are styles on my Astro site not working in GitHub Pages?</h1>
    <div class="astro-FTBPKZRT">Tagged with <ul class="astro-FTBPKZRT"><li class="astro-FTBPKZRT">

<span class="tag astro-PHGEZXLB">
  
  <a href="/tags/tech" class="astro-PHGEZXLB">tech</a>
</span></li><li class="astro-FTBPKZRT">

<span class="tag astro-PHGEZXLB">
  
  <a href="/tags/astro" class="astro-PHGEZXLB">astro</a>
</span></li><li class="astro-FTBPKZRT">

<span class="tag astro-PHGEZXLB">
  
  <a href="/tags/github-pages" class="astro-PHGEZXLB">github-pages</a>
</span></li><li class="astro-FTBPKZRT">

<span class="tag astro-PHGEZXLB">
  
  <a href="/tags/site" class="astro-PHGEZXLB">site</a>
</span></li></ul></div>
    <div class="astro-NJ2CT6BC">
    <iframe style="border-radius:12px; height: 100px" src="https://open.spotify.com/embed/track/1GfBLbAhZUWdseuDqhocmn?utm_source=generator&#38;theme=0" width="100%" height="152" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy" class="astro-NJ2CT6BC"></iframe>
  </div>
  </header><div class="container astro-FTBPKZRT">
    <article class="content astro-FTBPKZRT">
      
      <p>I've been hosting my website with GitHub Pages in its last three iterations, and have most recently rewritten it in Astro. When I uploaded my first static build to my repo, I noticed that the rendered output was not the same as on my local even though all the files were identical. Something was off, and my suspicion was that it was GitHub's doing. I fixed it in <a href="/blog/release-6-missed-it">Release 6</a>.</p>
<h2 id="tldr">TL;DR</h2>
<ul>
<li>Astro generates static files which start with underscores</li>
<li><a href="https://pages.GitHub.com/" target="_blank" rel="nofollow">GitHub Pages</a> is preconfigured to use <a href="https://jekyllrb.com/" target="_blank" rel="nofollow">Jekyll</a> as a static site generator.</li>
<li>Jekyll considers filenames starting with underscores to be special resources and ignores them. This means they will not be served by your site.</li>
<li>To fix this, bypass Jekyll by adding a file named <code>.nojekyll</code> to the root of the repository for your site.</li>
</ul>
<p>Source: <a href="https://github.blog/2009-12-29-bypassing-jekyll-on-github-pages/" target="_blank" rel="nofollow">GitHub Blog - Bypassing Jekyll on GitHub Pages</a></p>
<h3 id="my-issue">My issue</h3>
<p>I pushed the first production ready build of my site to my GitHub pages repo with excitement. It was a simple copy-over from the <code>dist</code> folder to the root of my repository. Once GitHub pages deployed my site, I noticed that my blog article title was far too wide, and my Bio component in the footer had my headshot too large and the typography sizing was wrong; in other words, both components were unstyled.</p>
<p>I dug deeper and discovered that the styles for these components lived in the blogpost's template, named <code>[slug].md</code>. When Astro built the static files for the site it put these styles into a file named <code>_slug_.a3a4f792.css</code>, which was then loaded on each of the blog pages.</p>
<p>When I served the site locally, these files were loading fine. But, when I deployed my site, looking for the URL of the CSS files returned my 404 page. Other CSS files would load fine, and I could see their raw contents in the browser. But it looks like this one wasn't being served at all. Hence, unstyled components.</p>
<h2 id="the-details">The Details</h2>
<h3 id="astros-dynamic-route-parameters">Astro's Dynamic Route Parameters</h3>
<p>Astro lets you dynamically generate multiple pages by letting you specify dynamic route parameters in your filenames. You can do this by creating a template with square brackets in the name, like <code>[dog].astro</code>. You then tell Astro all the paths it should generate with this template by exporting a function called <code>getStaticPaths()</code> from it, and having the function return an array of objects which tells Astro the possible values for the <code>[dog]</code> parameter.</p>
<pre is:raw="" class="astro-code" style="background-color: #2e3440ff; overflow-x: auto;"><code><span class="line"><span style="color: #81A1C1">---</span></span>
<span class="line"><span style="color: #81A1C1">export</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">function</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">getStaticPaths</span><span style="color: #ECEFF4">()</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #81A1C1">return</span><span style="color: #D8DEE9FF"> [</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #ECEFF4">{</span><span style="color: #88C0D0">params</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span><span style="color: #88C0D0">dog</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">'</span><span style="color: #A3BE8C">clifford</span><span style="color: #ECEFF4">'</span><span style="color: #ECEFF4">}},</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #ECEFF4">{</span><span style="color: #88C0D0">params</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span><span style="color: #88C0D0">dog</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">'</span><span style="color: #A3BE8C">rover</span><span style="color: #ECEFF4">'</span><span style="color: #ECEFF4">}},</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #ECEFF4">{</span><span style="color: #88C0D0">params</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span><span style="color: #88C0D0">dog</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">'</span><span style="color: #A3BE8C">spot</span><span style="color: #ECEFF4">'</span><span style="color: #ECEFF4">}},</span></span>
<span class="line"><span style="color: #D8DEE9FF">  ]</span><span style="color: #81A1C1">;</span></span>
<span class="line"><span style="color: #ECEFF4">}</span></span></code></pre>
<p>More information in <a href="https://docs.astro.build/en/core-concepts/routing/#dynamic-routes" target="_blank" rel="nofollow">Astro's docs on dynamic routes</a>.</p>
<p>If there are any extra styles in these templates, Astro will pull them out and scope them with hashed classes, and will generate a CSS file based on the template's original filename, but with the square brackets replaced by underscores. In the above example, this would look something like <code>_dog_.b8f7f6g5.css</code>. This file would then get loaded by each instance of the generated template.</p>
<h3 id="jekylls-configuration">Jekyll's configuration</h3>
<p>Jekyll has been used by GitHub to serve static pages for some time now. The format for its configuration files start with underscores (e.g. <code>_config.yml</code>). There's not much point to serving these from your static site, so Jekyll ignores them by default. Ipso facto, <strong>this means that Jekyll won't serve the CSS files Astro generates for templates with dynamic paths</strong>. So all of those generated static pages will reference a file that isn't being hosted.</p>
<p>There are a bunch of ways of <a href="https://jekyllrb.com/docs/configuration/options/#global-configuration" target="_blank" rel="nofollow">telling Jekyll not to do that</a>, but in this context we don't need Jekyll at all so there's no need to maintain a configuration. Instead we can easily tell GitHub Pages that we aren't using Jekyll by adding a file to the repo's root called <code>.nojekyll</code>, and the static files will get hosted as-is. GitHub Pages does the rest.</p>
<h2 id="conclusion">Conclusion</h2>
<p>I hope that context was useful knowledge, and if not, I hope you stopped reading at the tl;dr. Keep creating!</p>
<p>✌️</p>
    </article>
    <hr class="astro-FTBPKZRT">
    <div class="astro-KFS66VHH">
  <img src="/assets/avatar.png" alt="Headshot of Miko" class="astro-KFS66VHH">
  <p class="astro-KFS66VHH">
    Thanks for reading. I'm <strong class="astro-KFS66VHH">Miko</strong>, a UI Developer from Sydney, Australia.<br class="astro-KFS66VHH">
    You can follow me on <a href="https://indieweb.social/@ademagic" target="_blank" rel="me noreferrer noopener" class="astro-KFS66VHH">Mastodon</a> or <a href="https://www.twitter.com/miko_a" target="_blank" class="astro-KFS66VHH">Twitter</a>, see my code on <a href="https://www.github.com/ademagic" target="_blank" rel="noreferrer noopener" class="astro-KFS66VHH">GitHub</a>, or connect with me on <a href="https://www.maxiferreira.com" target="_blank" rel="noreferrer noopener" class="astro-KFS66VHH">LinkedIn</a>.
  </p>
</div>


  </div>
    </main>

    <footer class="astro-3YTRIK2C">
  <div class="astro-3YTRIK2C">
    <div class="left astro-3YTRIK2C">
      <span class="astro-3YTRIK2C">
        &copy; 2023 Miko Ademagic.
        <ul class="astro-3YTRIK2C">
          <li class="astro-3YTRIK2C"><a target="_blank" rel="noopener nofollow" href="https://indieweb.social/@ademagic" class="astro-3YTRIK2C">Mastodon</a></li>
          <li class="astro-3YTRIK2C"><a target="_blank" rel="noopener nofollow" href="https://twitter.com/miko_a" class="astro-3YTRIK2C">Twitter</a></li>
          <li class="astro-3YTRIK2C"><a target="_blank" rel="noopener nofollow" href="https://github.com/ademagic" class="astro-3YTRIK2C">Github</a></li>
          <li class="astro-3YTRIK2C"><a target="_blank" rel="noopener nofollow" href="https://www.linkedin.com/in/mikoademagic/" class="astro-3YTRIK2C">Linkedin</a></li>
        </ul>
      </span>
      <div class="astro-3YTRIK2C">
        <span class="astro-3YTRIK2C">Latest Release: <a href="/releases/release-9-may-the-4th" class="astro-3YTRIK2C">Release 9: May the 4th be with you</a></span>
      </div>
    </div>
    <div class="right astro-3YTRIK2C">
      <ul class="astro-3YTRIK2C">
        <li class="astro-3YTRIK2C"><a href="/" class="astro-3YTRIK2C">Home</a></li>
        <li class="astro-3YTRIK2C"><a href="/credits" class="astro-3YTRIK2C">Credits</a></li>
        <li class="astro-3YTRIK2C"><a href="/about" class="astro-3YTRIK2C">About</a></li>
        <li class="astro-3YTRIK2C"><a href="/releases" class="astro-3YTRIK2C">Releases</a></li>
        <li class="astro-3YTRIK2C"><a href="/blog" class="astro-3YTRIK2C">Blog</a></li>
        <li class="astro-3YTRIK2C"><a href="/now" class="astro-3YTRIK2C">Now</a></li>
      </ul>
    </div>
  </div>
</footer>


  </div>

</body></html>

